#!/bin/bash
# Universal integration test runner
# Detects the platform and runs the appropriate script

set -e

if [[ "$OSTYPE" == "msys" || "$OSTYPE" == "cygwin" || "$OSTYPE" == "win32" ]]; then
    # Windows (Git Bash, Cygwin, or similar)
    if command -v powershell &> /dev/null; then
        powershell -ExecutionPolicy Bypass -File "./run_integration_tests.ps1"
    else
        echo "PowerShell not found. Running bash version..."
        ./run_integration_tests.sh
    fi
else
    # macOS, Linux, or other Unix-like systems
    ./run_integration_tests.sh
fi
